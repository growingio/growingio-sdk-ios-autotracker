<!DO<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" href="data:image/ico;base64,aWNv">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover">
    <title>GrowingIO Hybrid In App</title>
    
    <script type='text/javascript'>
      (function(window, document, script, src, namespace) {
        window[namespace] = window[namespace] || function() {
          (window[namespace].q = window[namespace].q || []).push(arguments)
        };
        script = document.createElement('script');
        let tag = document.getElementsByTagName('script')[0];
        script.async = true;
        script.src = src;
        tag.parentNode.insertBefore(script, tag);
      })(window, document, 'script', 'https://assets.giocdn.com/sdk/cdp/gio.js', 'gdp');

      gdp('init', 'bc675c65b3b0290e', 'your dataSourceId', {
        host: 'api.growingio.com',
        version: '1.0.0'
      });
      gdp('send');
    </script>
    
    <script>
        function getWebViewJavascriptBridgeConfiguration() {
            return GrowingWebViewJavascriptBridge.configuration = JSON.parse(window.GrowingWebViewJavascriptBridge.getConfiguration());
        }

        function sendMockCustomEvent() {
            let event = {
                "deviceId": "7196f014-d7bc-4bd8-b920-757cb2375ff6",
                "sessionId": "d5cbcf77-b38b-4223-954f-c6a2fdc0c098",
                "eventType": "CUSTOM",
                "platform": "Web",
                "timestamp": 1602485628504,
                "domain": "test-browser.growingio.com",
                "path": "/push/web.html",
                "query": "a=1&b=2",
                "title": "Hybrid测试页面",
                "referralPage": "http://test-browser.growingio.com/push",
                "globalSequenceId": 99,
                "eventSequenceId": 3,
                "eventName": "test_name",
            };
            sendMockEvent(event);
        }
        
        function sendMockCustomEventWithAttributes() {
            let event = {
                "deviceId": "7196f014-d7bc-4bd8-b920-757cb2375ff6",
                "sessionId": "d5cbcf77-b38b-4223-954f-c6a2fdc0c098",
                "eventType": "CUSTOM",
                "platform": "Web",
                "timestamp": 1602485628504,
                "domain": "test-browser.growingio.com",
                "path": "/push/web.html",
                "query": "a=1&b=2",
                "title": "Hybrid测试页面",
                "referralPage": "http://test-browser.growingio.com/push",
                "globalSequenceId": 99,
                "eventSequenceId": 3,
                "eventName": "test_name",
                "attributes": {
                    "key1": "value1",
                    "key2": "value2",
                    "key3": "",
                    "key4": null,
                    "key5": undefined
                }
            };
            sendMockEvent(event);
        }

        function sendMockLoginUserAttributesEvent() {
            let event = {
                "deviceId": "7196f014-d7bc-4bd8-b920-757cb2375ff6",
                "sessionId": "d5cbcf77-b38b-4223-954f-c6a2fdc0c098",
                "eventType": "LOGIN_USER_ATTRIBUTES",
                "platform": "Web",
                "timestamp": 1602485628504,
                "domain": "test-browser.growingio.com",
                "path": "/push/web.html",
                "query": "a=1&b=2",
                "title": "Hybrid测试页面",
                "referralPage": "http://test-browser.growingio.com/push",
                "globalSequenceId": 99,
                "eventSequenceId": 3,
                "attributes": {
                    "key1": "value1",
                    "key2": "value2",
                    "key3": "",
                    "key4": null,
                    "key5": undefined
                }
            };
            sendMockEvent(event);
        }

        function sendMockPageEvent() {
            let event = {
                "deviceId": "7196f014-d7bc-4bd8-b920-757cb2375ff6",
                "sessionId": "d5cbcf77-b38b-4223-954f-c6a2fdc0c098",
                "eventType": "PAGE",
                "platform": "Web",
                "timestamp": 1602485628504,
                "domain": "test-browser.growingio.com",
                "path": "/push/web.html",
                "title": "Hybrid测试页面",
                "referralPage": "http://test-browser.growingio.com/push",
                "protocolType": "https",
                "globalSequenceId": 99,
                "eventSequenceId": 3
            };
            sendMockEvent(event);
        }

        function sendMockPageEventWithQuery() {
            let event = {
                "deviceId": "7196f014-d7bc-4bd8-b920-757cb2375ff6",
                "sessionId": "d5cbcf77-b38b-4223-954f-c6a2fdc0c098",
                "eventType": "PAGE",
                "platform": "Web",
                "timestamp": 1602485628504,
                "domain": "test-browser.growingio.com",
                "path": "/push/web.html",
                "query": "a=1&b=2",
                "title": "Hybrid测试页面",
                "referralPage": "http://test-browser.growingio.com/push",
                "protocolType": "https",
                "globalSequenceId": 99,
                "eventSequenceId": 3
            };
            sendMockEvent(event);
        }

        function sendMockFilePageEvent() {
            let event = {
                "deviceId": "7196f014-d7bc-4bd8-b920-757cb2375ff6",
                "sessionId": "d5cbcf77-b38b-4223-954f-c6a2fdc0c098",
                "eventType": "PAGE",
                "platform": "Web",
                "timestamp": 1602485628504,
                "path": "/push/web.html",
                "title": "Hybrid测试页面",
                "protocolType": "file",
                "globalSequenceId": 99,
                "eventSequenceId": 3
            };
            sendMockEvent(event);
        }

        function sendMockPageEventWithAttributes() {
            let event = {
                "deviceId": "7196f014-d7bc-4bd8-b920-757cb2375ff6",
                "sessionId": "d5cbcf77-b38b-4223-954f-c6a2fdc0c098",
                "eventType": "PAGE",
                "platform": "Web",
                "timestamp": 1602485628504,
                "domain": "test-browser.growingio.com",
                "path": "/push/web.html",
                "title": "Hybrid测试页面",
                "referralPage": "http://test-browser.growingio.com/push",
                "protocolType": "https",
                "globalSequenceId": 99,
                "eventSequenceId": 3,
                "attributes": {
                    "key1": "value1",
                    "key2": "value2",
                    "key3": "",
                    "key4": null,
                    "key5": undefined
                }
            };
            sendMockEvent(event);
        }

        function sendMockViewClickEvent() {
            let event = {
                "deviceId": "7196f014-d7bc-4bd8-b920-757cb2375ff6",
                "sessionId": "d5cbcf77-b38b-4223-954f-c6a2fdc0c098",
                "eventType": "VIEW_CLICK",
                "platform": "Web",
                "timestamp": 1602485628504,
                "domain": "test-browser.growingio.com",
                "path": "/push/web.html",
                "query": "a=1&b=2",
                "title": "Hybrid测试页面",
                "referralPage": "http://test-browser.growingio.com/push",
                "globalSequenceId": 99,
                "eventSequenceId": 3,
                "textValue": "登录",
                "xpath": "/div/button",
                "xcontent": "/divClass/buttonId",
                "index": 1,
                "hyperlink": "https://www.growingio.com"
            };
            sendMockEvent(event);
        }

        function sendMockViewChangeEvent() {
            let event = {
                "deviceId": "7196f014-d7bc-4bd8-b920-757cb2375ff6",
                "sessionId": "d5cbcf77-b38b-4223-954f-c6a2fdc0c098",
                "eventType": "VIEW_CHANGE",
                "platform": "Web",
                "timestamp": 1602485628504,
                "domain": "test-browser.growingio.com",
                "path": "/push/web.html",
                "query": "a=1&b=2",
                "title": "Hybrid测试页面",
                "referralPage": "http://test-browser.growingio.com/push",
                "globalSequenceId": 99,
                "eventSequenceId": 3,
                "textValue": "输入内容",
                "xpath": "/div/form/input",
                "xcontent": "/divClass/formClass/inputId",
                "index": 1
            };
            sendMockEvent(event);
        }

        function sendMockFormSubmitEvent() {
            let event = {
                "deviceId": "7196f014-d7bc-4bd8-b920-757cb2375ff6",
                "sessionId": "d5cbcf77-b38b-4223-954f-c6a2fdc0c098",
                "eventType": "FORM_SUBMIT",
                "platform": "Web",
                "timestamp": 1602485628504,
                "domain": "test-browser.growingio.com",
                "path": "/push/web.html",
                "query": "a=1&b=2",
                "title": "Hybrid测试页面",
                "referralPage": "http://test-browser.growingio.com/push",
                "globalSequenceId": 99,
                "eventSequenceId": 3,
                "xpath": "/div/form/input",
                "index": 1
            };
            sendMockEvent(event);
        }

        function sendMockEvent(event) {
            GrowingWebViewJavascriptBridge.dispatchEvent(JSON.stringify(event));
        }

        function mockSetUserId(name) {
            GrowingWebViewJavascriptBridge.setNativeUserId(name);
        }

        function mockClearUserId() {
            GrowingWebViewJavascriptBridge.clearNativeUserId();
        }
        
        function mockSetUserIdAndUserKey(userId, userKey) {
            GrowingWebViewJavascriptBridge.setNativeUserIdAndUserKey(userId, userKey);
        }
        
        function mockClearUserIdAndUserKey() {
            GrowingWebViewJavascriptBridge.clearNativeUserIdAndUserKey();
        }

        function mockDomChanged() {
            GrowingWebViewJavascriptBridge.onDomChanged();
        }
    </script>
</head>

<body>
    <div class='main'>
        <div class='title' id="mark">
            <h2>autotrack hybrid</h2>
            <div>
                <div class='title'>
                    <h3>这仅仅是一个测试页面</h3>
                    <button class="button" onclick="javascript:sendMockVisitEvent()" type="button">
                        sendMockVisitEvent
                    </button>
                    <button class="button" onclick="javascript:sendMockCustomEvent()" type="button">
                        sendMockCustomEvent
                    </button>
                    <button class="button" onclick="javascript:sendMockCustomEventWithAttributes()" type="button">
                        sendMockCustomEventWithAttributes
                    </button>
                    <button class="button" onclick="javascript:sendMockLoginUserAttributesEvent()" type="button">
                        sendMockLoginUserAttributesEvent
                    </button>
                    <button class="button" onclick="javascript:sendMockPageEvent()" type="button">
                        sendMockPageEvent
                    </button>
                    <button class="button" onclick="javascript:sendMockPageEventWithQuery()" type="button">
                        sendMockPageEventWithQuery
                    </button>
                    <button class="button" onclick="javascript:sendMockFilePageEvent()" type="button">
                        sendMockFilePageEvent
                    </button>
                    <button class="button" onclick="javascript:sendMockPageEventWithAttributes()" type="button">
                        sendMockPageEventWithAttributes
                    </button>
                    <button class="button" onclick="javascript:sendMockViewClickEvent()" type="button">
                        sendMockViewClickEvent
                    </button>
                    <button class="button" onclick="javascript:sendMockViewChangeEvent()" type="button">
                        sendMockViewChangeEvent
                    </button>
                    <button class="button" onclick="javascript:sendMockFormSubmitEvent()" type="button">
                        sendMockFormSubmitEvent
                    </button>
                    <button class="button" onclick="javascript:mockSetUserId('name')" type="button">
                        mockSetUserId('name')
                    </button>
                    <button class="button" onclick="javascript:mockClearUserId()" type="button">
                        mockClearUserId
                    </button>
                    <button class="button" onclick="javascript:mockSetUserIdAndUserKey('name', 'key')" type="button">
                        mockSetUserIdAndUserKey('name', 'key')
                    </button>
                    <button class="button" onclick="javascript:mockclearUserIdAndUserKey()" type="button">
                        mockclearUserIdAndUserKey
                    </button>
                    <button class="button" onclick="javascript:mockDomChanged()" type="button">
                        mockDomChanged
                    </button>
                </div>
            </div>
</body>
<footer>
</footer>

</html>
